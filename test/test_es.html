<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <svg id="map"></svg>
    <script src="../build/eurostatmap.js"></script>
    <script>

        const map = eurostatmap
            .map("ch", {
                title: "Population in Spain",
                width: 550,
                heiht: 550,
                nutsLvl: 2,
                titleFill: "#333",
                titlePosition: [20,37],
                scale: "10M",
                geoCenter: [3220000,1970000],
                pixSize: 2900,
                stats: { eurostatDatasetCode:"demo_r_d3dens" },
                unitText: "inhabitants/km²",
                tooltipShowFlags: false,
                classifMethod: "threshold", threshold: [40, 70, 100, 150, 300, 800],
            })
            .withInsets([{ geo:"IC", pixSize:2900, width:200, height:90, title:"Canary islands", titleFontSize:16, titleFontWeight:"" }]).insetBoxPosition([335,345])
            .withLegend( {labelDecNb:0, width: 60, x:13, y:60, boxOpacity:0, boxPadding:7, title:"Inhab./km²" } )
            .build();

            //set title with date
            //TODO make callback mechanisme fro this kind of actions to launch after the map is loaded
            setTimeout(() => {
                if(map.getTime())
                    map.title(map.title() + " in " + map.getTime());
            }, 2000)


/*
Unemployment rates by sex, age and NUTS 2 regions (%) (lfst_r_lfu3rt)
Youth unemployment rate, 2019 (%, share of labour force aged 15-24 years, by NUTS 2 regions)
Source: Eurostat, lfst_r_lfu3rt
*/
    </script>
</body>

</html>
