<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <svg id="map"></svg>
    <script src="../build/eurostatmap.js"></script>
    <script>

        const map = eurostatmap
            .map("ch", {
                title: "Unemployment in Spain",
                width: 550,
                heiht: 550,
                nutsLvl: 2,
                titleFill: "#333",
                titlePosition: [20,37],
                scale: "10M",
                geoCenter: [3220000,1970000],
                pixSize: 2900,
                unitText: "%",
                //classifMethod: "equinter", clnb: 15,
                classifMethod: "threshold", threshold: [4,6,8,10,12,14,16,18,20,21],
            })
            .stat( { eurostatDatasetCode:"lfst_r_lfu3rt", filters:{ age: "Y20-64", sex: "T", unit: "PC", time: "2019" } } )
            .withInsets([{ geo:"IC", pixSize:2900, width:200, height:90, title:"Canary islands", titleFontSize:16, titleFontWeight:"" }]).insetBoxPosition([335,345])
            .withLegend( {labelDecNb:1, width: 60, x:13, y:60, boxOpacity:0, boxPadding:7, title:"Rate (%)" } )
            .build();

            //set title with date
            //TODO make callback mechanisme fro this kind of actions to launch after the map is loaded
            setTimeout(() => {
                if(map.getTime())
                    map.title(map.title() + " in " + map.getTime());
            }, 2000)

    </script>
</body>

</html>
